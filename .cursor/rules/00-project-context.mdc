---
globs: ["**/*"]
alwaysApply: true
---

# Project Context & Rule Suggestions

**At the start of every session, read `.cursor/project.yaml` to understand this project's specific configuration.**

---

## IMPORTANT: Suggest Relevant Rules

**When the user's request matches a pattern below, proactively suggest the relevant rule.**

### Rule Suggestion Format

```
ðŸ’¡ **Rule Suggestion**: This looks like [pattern description]. 
   See `.cursor/rules/[rule-file].mdc` for the recommended approach.
```

### Pattern â†’ Rule Mapping

| User Request Pattern | Suggest Rule | Why |
|---------------------|--------------|-----|
| "Rename X to Y everywhere" | `11-ralph-loops.mdc` | Mass mechanical refactor |
| "Update all 20+ files to..." | `11-ralph-loops.mdc` | Large file count |
| "Migrate from X library to Y" | `11-ralph-loops.mdc` | Library migration |
| "Replace all console.log with..." | `11-ralph-loops.mdc` | Codebase-wide pattern change |
| "Add X to every component" | `11-ralph-loops.mdc` | Repetitive mechanical task |
| Working with LLM/AI code | `04-llm-integration.mdc` | LLM client patterns |
| Writing prompts | `05-prompts.mdc` | Prompt engineering |
| Building agent/workflow | `06-agents.mdc` | Agent patterns |
| API rate limiting | `07-rate-limits.mdc` | Retry/rate limit patterns |
| Security concerns with AI | `08-ai-security.mdc` | AI security patterns |
| Logging/tracing AI calls | `09-observability.mdc` | Observability patterns |
| Testing AI features | `10-testing-ai.mdc` | AI testing patterns |

### Example Suggestions

**User says:** "Rename UserContext to AuthContext across the whole codebase"

**You respond:**
> ðŸ’¡ **Rule Suggestion**: This is a codebase-wide rename â€” a good fit for the Ralph Loop pattern.
> See `.cursor/rules/11-ralph-loops.mdc` for autonomous CLI loops with fresh context per iteration.
> 
> Want me to help plan this using Ralph, or proceed normally?

**User says:** "Add error handling to all my API routes"

**You respond:**
> ðŸ’¡ **Rule Suggestion**: If this affects 20+ files, consider the Ralph Loop pattern.
> See `.cursor/rules/11-ralph-loops.mdc` for mechanical mass changes.
> 
> Let me check how many files are affected first...

### When NOT to Suggest

Don't suggest rules for:
- Simple single-file tasks
- Exploratory questions ("how does X work?")
- Tasks already well underway
- When the user explicitly declines

---

## Project Context Loading

Before making code changes, load the project context:

```
Read: .cursor/project.yaml
```

This file contains:
- Project identity and type
- Tech stack details
- Directory structure
- Naming conventions
- Team preferences
- Custom notes and context

## How to Use Project Context

When the project.yaml is loaded, adapt your behavior:

| Context Field | How It Affects Responses |
|---------------|-------------------------|
| `stack.framework` | Use framework-specific patterns and APIs |
| `stack.styling` | Generate styles in the specified format |
| `conventions.components` | Name components in the specified case |
| `conventions.state_management` | Use the specified state solution |
| `directories.*` | Place files in the correct locations |
| `preferences.test_framework` | Write tests for the specified framework |
| `preferences.commit_style` | Format commit messages accordingly |
| `notes` | Follow any custom project guidance |

## Example Usage

When asked to create a component, check project.yaml and apply:

```typescript
// If conventions.components = "PascalCase" and stack.styling = "Tailwind"
// Create: src/components/UserProfile.tsx with Tailwind classes

// If conventions.components = "kebab-case" and stack.styling = "SCSS"  
// Create: src/components/user-profile/user-profile.tsx with .module.scss
```

## When project.yaml is Missing

If `.cursor/project.yaml` doesn't exist, ask:

> "I don't see a project context file. Would you like me to create `.cursor/project.yaml` with your project's configuration? This helps me give more accurate, project-specific responses."

Then gather:
1. What framework/stack are you using?
2. What are your naming conventions?
3. Any specific patterns I should follow?

## Quick Reference

| Project Type | Key Considerations |
|--------------|-------------------|
| `web-app` | SSR/CSR, routing, state management |
| `api` | REST/GraphQL, validation, auth middleware |
| `cli` | Args parsing, stdout/stderr, exit codes |
| `library` | Exports, bundling, peer dependencies |
| `monorepo` | Workspace structure, shared packages |
